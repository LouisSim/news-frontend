{"ast":null,"code":"import React,{useState,useRef}from'react';import axios from'axios';import'./FactDisplay.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const FactDisplay=_ref=>{let{articles,error,isLoading}=_ref;const[expandedArticleIndex,setExpandedArticleIndex]=useState(null);const[additionalData,setAdditionalData]=useState({});const[loadingAdditionalData,setLoadingAdditionalData]=useState(false);const cache=useRef({});const handleToggleExpand=async(index,article)=>{if(expandedArticleIndex===index){setExpandedArticleIndex(null);}else{setExpandedArticleIndex(index);setLoadingAdditionalData(true);const cacheKey=`${article.url}`;if(cache.current[cacheKey]){setAdditionalData(prevData=>({...prevData,[index]:cache.current[cacheKey]}));setLoadingAdditionalData(false);}else{try{const response=await axios.get('http://localhost:8000/additional-data',{params:{articleId:index,articleUrl:article.url}});cache.current[cacheKey]=response.data;setAdditionalData(prevData=>({...prevData,[index]:response.data}));}catch(err){console.error('Error fetching additional data:',err);}finally{setLoadingAdditionalData(false);}}}};if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error]});}if((!articles||articles.length===0)&&!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"no-facts\",children:\"Unbiased Insights, AI-Powered Clarity\"});}if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"no-facts\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"fact-display\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Articles:\"}),/*#__PURE__*/_jsx(\"ul\",{children:articles.map((article,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"fact-item bullet-color\",onClick:()=>handleToggleExpand(index,article),children:[/*#__PURE__*/_jsx(\"h4\",{children:article.title}),/*#__PURE__*/_jsx(\"p\",{className:\"article-description\",children:article.description}),/*#__PURE__*/_jsx(\"div\",{className:`expanded-content ${expandedArticleIndex===index?'expanded':''}`,style:{maxHeight:expandedArticleIndex===index?'none':'0',overflow:'hidden',transition:'max-height 0.3s ease-in-out'},children:loadingAdditionalData&&expandedArticleIndex===index?/*#__PURE__*/_jsx(\"p\",{children:\"Loading additional information...\"}):expandedArticleIndex===index&&additionalData[index]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"ai-summary\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"add-info-header\",children:\"AI Summary:\"}),\" \",additionalData[index].summary]}),/*#__PURE__*/_jsxs(\"p\",{className:\"ai-summary\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"add-info-header\",children:\"Bias Rating:\"}),\" \",additionalData[index].biasRating]})]})}),/*#__PURE__*/_jsx(\"a\",{href:article.url,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Read full article\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Source: \",article.source]})]},index))})]});};export default FactDisplay;","map":{"version":3,"names":["React","useState","useRef","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","FactDisplay","_ref","articles","error","isLoading","expandedArticleIndex","setExpandedArticleIndex","additionalData","setAdditionalData","loadingAdditionalData","setLoadingAdditionalData","cache","handleToggleExpand","index","article","cacheKey","url","current","prevData","response","get","params","articleId","articleUrl","data","err","console","className","children","length","map","onClick","title","description","style","maxHeight","overflow","transition","summary","biasRating","href","target","rel","source"],"sources":["/home/simeo/news/client/src/components/FactDisplay.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport './FactDisplay.css';\n\nconst FactDisplay = ({ articles, error, isLoading }) => {\n  const [expandedArticleIndex, setExpandedArticleIndex] = useState(null);\n  const [additionalData, setAdditionalData] = useState({});\n  const [loadingAdditionalData, setLoadingAdditionalData] = useState(false);\n  const cache = useRef({});\n\n  const handleToggleExpand = async (index, article) => {\n    if (expandedArticleIndex === index) {\n      setExpandedArticleIndex(null);\n    } else {\n      setExpandedArticleIndex(index);\n      setLoadingAdditionalData(true);\n\n      const cacheKey = `${article.url}`;\n      if (cache.current[cacheKey]) {\n        setAdditionalData((prevData) => ({\n          ...prevData,\n          [index]: cache.current[cacheKey],\n        }));\n        setLoadingAdditionalData(false);\n      } else {\n        try {\n          const response = await axios.get('http://localhost:8000/additional-data', {\n            params: {\n              articleId: index,\n              articleUrl: article.url,\n            },\n          });\n          cache.current[cacheKey] = response.data;\n          setAdditionalData((prevData) => ({\n            ...prevData,\n            [index]: response.data,\n          }));\n        } catch (err) {\n          console.error('Error fetching additional data:', err);\n        } finally {\n          setLoadingAdditionalData(false);\n        }\n      }\n    }\n  };\n\n  if (error) {\n    return <div className=\"error\">Error: {error}</div>;\n  }\n\n  if ((!articles || articles.length === 0) && !isLoading) {\n    return <div className=\"no-facts\">Unbiased Insights, AI-Powered Clarity</div>;\n  }\n\n  if (isLoading) {\n    return <div className=\"no-facts\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"fact-display\">\n      <h3>Articles:</h3>\n      <ul>\n        {articles.map((article, index) => (\n          <li key={index} className=\"fact-item bullet-color\" onClick={() => handleToggleExpand(index, article)}>\n            <h4>{article.title}</h4>\n            <p className='article-description'>{article.description}</p>\n\n            <div\n              className={`expanded-content ${expandedArticleIndex === index ? 'expanded' : ''}`}\n              style={{\n                maxHeight: expandedArticleIndex === index ? 'none' : '0',\n                overflow: 'hidden',\n                transition: 'max-height 0.3s ease-in-out',\n              }}\n            >\n              {loadingAdditionalData && expandedArticleIndex === index ? (\n                <p>Loading additional information...</p>\n              ) : (\n                expandedArticleIndex === index && additionalData[index] && (\n                  <>\n                    <p className='ai-summary'> <div className='add-info-header'>AI Summary:</div> {additionalData[index].summary}</p>\n                    <p className='ai-summary'> <div className='add-info-header'>Bias Rating:</div> {additionalData[index].biasRating}</p>\n                  </>\n                )\n              )}\n            </div>\n            <a href={article.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              Read full article\n            </a>\n            <p>Source: {article.source}</p>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default FactDisplay;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}